(()=>{var t=!1;document.onreadystatechange=function(){if("complete"===document.readyState){if($("input[name=password_confirm").length>0&&($("#register").length>0?$("#register").submit((function(n){if(!t){n.preventDefault();var e={};$("form#register :input").each((function(){var t=$(this);e[$(t).attr("name")]=$(t).val()})),axios.post(window.location.origin+"/pthranking/account/create",e).then((function(n){t=!0,$("form#register input[name=submit]").click()})).catch((function(t){console.log(t)}))}})):$("#ucp").length>0&&$("#ucp").submit((function(n){if(!t){n.preventDefault();var e={};$("form#ucp :input").each((function(){var t=$(this);e[$(t).attr("name")]=$(t).val()})),document.querySelector("#ucp #email")||(e.email=document.querySelectorAll("#ucp fieldset dl dd strong")[1].textContent),axios.post(window.location.origin+"/pthranking/account/change",e).then((function(n){t=!0,$("#ucp input[name=submit]").click()})).catch((function(t){console.log(t)}))}}))),$(".has-profile").length>0&&$(".has-profile").each((function(t,n){axios.get(window.location.origin+"/pthranking/player/gender-country?u="+$(n).find("a[class^=username]").text()).then((function(t){""!=t.data.country_iso&&$(n).find("a[class^=username]").parent().append($("<br/>"),$("<img/>").attr("src","/images/flags/"+t.data.country_iso+".svg").css("width","24px").css("height","14px").css("margin-top","2px"))})).catch((function(t){console.log(t)}))})),$("form#ucp").length>0&&$("#pf_phpbb_location").length>0){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.media="screen",n.href="/pthranking/css/countryflags.css",document.getElementsByTagName("head")[0].appendChild(n),(n=document.createElement("link")).rel="stylesheet",n.type="text/css",n.media="screen",n.href="/pthranking/css/dd.css",document.getElementsByTagName("head")[0].appendChild(n);var e=$("form#ucp fieldset").first(),a=$("<div/>").addClass("pth_country").append((function(){return[$("<div/>").addClass("pth_label").append($("<label/>").attr("for","pth_ranking").text("Country Flag:")),$("<div/>").addClass("pth_select").append((function(){return $("<select/>").attr("name","pth_country").attr("id","pth_country").append((function(){for(var t=[],n=0;n<window.countries.length;n++){var e=window.countries[n];t.push($("<option/>").val(e.png).text(e.title).attr("data-imgsrc","/images/flags/"+e.svg+".svg"))}return t}))}))]})),o=$("<div/>").addClass("pth_gender").append((function(){return[$("<div/>").addClass("pth_label").append($("<label/>").attr("for","pth_gender").text("Gender:")),$("<div/>").append((function(){return[$("<input/>").attr("name","pth_gender").attr("type","radio").addClass("inputbox autowidth").val("m"),$("<span/>").text("male"),$("<input/>").attr("name","pth_gender").attr("type","radio").addClass("inputbox autowidth").val("f"),$("<span/>").text("female"),$("<input/>").attr("name","pth_gender").attr("type","radio").addClass("inputbox autowidth").val(""),$("<span/>").text("none")]}))]}));$(e).append(a),$(e).append(o),$.getScript("/pthranking/js/dd.js",(function(){$("html").hasClass("fd_dark")?$("select#pth_country").gorillaDropdown({dropdownHeight:"200px",backgroundColor:"#171b24",textFontWeight:"normal",textFontColor:"#cccccc",padding:6,borderColor:"rgba(255,255,255,0.04)"}):$("select#pth_country").gorillaDropdown({dropdownHeight:"200px",backgroundColor:"#ffffff",textFontWeight:"normal",textFontColor:"#333333",padding:6,borderColor:"#edecec"})})),axios.get(window.location.origin+"/pthranking/player/gender-country?u="+$("#username_logged_in span[class^=username]").text()).then((function(t){""!=t.data.country_iso&&($(".pth_country li.dd-item").removeClass("selected"),$(".pth_country input.value[value="+t.data.country_iso+"]").parent().addClass("selected"),$(".pth_country .current .content img.image").attr("src","/images/flags/"+t.data.country_iso+".svg"),$(".pth_country .current .content div.text").text($(".pth_country input.value[value="+t.data.country_iso+"]").parent().find("div.text").text()),$('.pth_gender input[value="'+t.data.gender+'"]').prop("checked",!0))})).catch((function(t){console.log(t)})),$("#ucp").submit((function(n){if(!t){n.preventDefault();var e={},a=$(".pth_country .content input.value").attr("name");void 0!==a&&!1!==a||$(".pth_country .content input.value").attr("name","country_iso"),$("form#ucp :input").each((function(){var t=$(this);"pth_gender"!=$(t).attr("name")?e[$(t).attr("name")]=$(t).val():e[$(t).attr("name")]=$(".pth_gender input:checked").val()})),e.username=$("#username_logged_in span[class^=username]").text(),axios.post(window.location.origin+"/pthranking/player/gender-country",e).then((function(n){t=!0,$("#ucp input[name=submit]").click()})).catch((function(t){console.log(t)}))}}))}if($("input[name=new_password_confirm").length>0&&$("#reset_password").submit((function(n){if(!t){n.preventDefault();var e={};$("form#reset_password :input").each((function(){var t=$(this);e[$(t).attr("name")]=$(t).val()})),axios.post(window.location.origin+"/pthranking/account/reset",e).then((function(n){t=!0,$("form#reset_password input[name=submit]").click()})).catch((function(t){console.log(t)}))}})),location.href.includes("mode=activate")){console.log("email verification here"),window.stop();var r={};$("body :input").each((function(){var t=$(this);r[$(t).attr("name")]=$(t).val()})),r.href=window.location.href,axios.post(window.location.origin+"/pthranking/account/validate",r).then((function(t){console.log(t.data)})).catch((function(t){console.log(t)}))}}}})();